<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="utf-8">
    <link th:href="@{/css/bootstrap.min.css}"
          href="../css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap cdn 설정 -->
    <!--    깔쌈한 스타일(전체 html에 적용시켜줌)-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body>
<div class="container" style="max-width: 1000px">
    <div th:replace="fragments/navbar :: navbarFragment"> </div>
    <nav id ="nav1">
        <div class="text-right">
            <ul>
                <span th:if="${info} != null" class="mx-3" th:text="|${info} 님 안녕하세요!!!|"></span>
                <!--                <a class="nav-link btn btn-warning" sec:authorize="isAnonymous()" th:href="@{/login}">로그인</a>-->
                <!--                <a class="nav-link btn btn-warning" sec:authorize="isAuthenticated()" th:href="@{/logout}">로그아웃</a>-->
            </ul>
        </div>
    </nav>
    <div>
        <form class="d-flex justify-content-end" name="search-form" th:action="@{/boards}" method="get">
            <input type="text" name="searchKeyword" th:value="${param.searchKeyword}">
            <input type="submit" class="btn btn-dark mr-2" value="검색">
        </form>
    </div>
    </br>
    <nav id ="nav2">
        <div class="text-right">
            <!--                /oauth2/authorization/google : 스프링 시큐리티에서 기본적으로 제공하는 로그인 URL-->
            <a href="/oauth2/authorization/google" sec:authorize="isAnonymous()" role="button" class="btn btn-outline-danger"><img id="img1" src="/img/google.ico" style="display: block; margin: 0 auto; width:25px; height:25px;"/>로그인</a>
            <a href="/oauth2/authorization/naver" sec:authorize="isAnonymous()" role="button" class="btn btn-outline-success"><img id="img2" src="/img/naver2.ico" style="display: block; margin: 0 auto; width:25px; height:25px;"/>로그인</a>
            <a class="nav-link btn btn-outline-info" sec:authorize="isAnonymous()" th:href="@{/login}"><img id="img4" src="/img/login.ico" style="display: block; margin: 0 auto; width:25px; height:25px;"/>로그인</a>
        </div>
    </nav>
    <form method="post" action="/signup" th:object="${signupForm}">
        <div class="container" style="max-width: 700px">
            <div class="form-group">
                <label th:for="inputEmail4">아이디</label>
                <input type="text" th:field="*{uid}" class="form-control" placeholder="아이디를 입력해주세요">
                <span style="color: #fb0101;" th:text="${valid_uid}"></span>
                <input class="btn btn-outline-warning btn-sm idCheck mx-1" type="button" id="usernameOverlay" onclick="usernameCheck()" value="아이디 중복체크"/>
                <d id="idAvailable" class="valid-feedback" style="display: none;"></d>
                <d id="idNotAvailable" class="invalid-feedback" style="display: none;"></d>
            </div>
            <div class="form-group">
                <label th:for="inputAddress">이름</label>
                <input type="text" th:field="*{uname}" class="form-control" placeholder="이름을 입력해주세요">
                <span style="color: #fb0101;" th:text="${valid_uname}"></span>
            </div>
            <div class="form-group">
                <label th:for="inputPassword4">비밀번호</label>
                <input type="password" th:field="*{u_pw}" class="form-control" placeholder="비밀번호를 입력해주세요">
                <span style="color: #fb0101;" th:text="${valid_u_pw}"></span>
            </div>
            <div class="form-group">
                <label th:for="inputEmail">이메일</label>
                <input type="text" th:field="*{email}" class="form-control" placeholder="이메일을 입력해주세요">
                <span style="color: #fb0101;" th:text="${valid_email}"></span>
            </div>
            <div class="form-group">
                <button id="submit" type="submit" class="btn btn-primary" disabled="disabled">가입 완료</button>
                <button type="button" class="btn btn-danger" th:onclick="|location.href='@{/boards}'|">취 소</button>
            </div>
        </div>
    </form>
</div>

<!--ajax를 사용하기 위해 signup.js라는 파일을 만들었다. 이 파일안에 usernameCheck라는 함수를 사용하기 위해서는 밑에와 같이 경로를 지정해줘야 거기 파일을 참고해서 사용 할 수있다.-->
<!--ajax에 동작방식에 대해서는 금방 알았지만 어떻게 돌아가는지와 ajax에 대한 이해가 부족해서 간단한 중복체크도 많이 헤맸다.-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" src="/js/signup.js"></script>
</body>

</html>